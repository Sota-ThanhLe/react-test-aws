name: Auto deploy

on:
  push:
    branches:
      - master

jobs:
  deploy:
    name: Deploy
    runs-on: ubuntu-latest
    steps:
      - uses: actions/checkout@v3
      - uses: actions/setup-node@v3
        with:
          node-version: '16'
      - name: Build and Deploy
        env:
          host: '172.16.1.221' #hostname of server
          password: '1'
          username: 'sotatek' #username login to server
          port: '22' #port of server - often port is 22

        run: | # run with multiple script
          echo "Deploy"
          cd /home/sotatek
          pwd
          echo "........"
          cd ~/react-test-aws
          pm2 start app.json
          echo "Done... !!!!"
